# yaml-language-server: $schema=https://raw.githubusercontent.com/defenseunicorns/zarf/main/zarf.schema.json
kind: ZarfPackageConfig
metadata:
  name: trust-bundle
  description: "Configures ca trust bundle for trust-manager to distribute to other namespaces"
  architecture: "amd64"
  version: "0.0.1"

variables:
  - name: CUSTOM_CA_CHAIN
    description: "Custom CA chain base64 encoded"

components:
  # Create secret containing custom CA Chain
  - name: ca-chain
    required: true
    manifests:
      - name: ca-chain
        namespace: cert-manager
        files:
          - ca-secret.yaml
  # Create trust-manager bundle containing public CAs and custom CA chain
  - name: trust-bundle
    required: true
    manifests:
      - name: trust-bundle
        namespace: cert-manager
        files:
          - trust-bundle.yaml
